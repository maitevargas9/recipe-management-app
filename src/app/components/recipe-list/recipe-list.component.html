<div class="recipe-list">
  <h2>Recipes</h2>

  <div class="filter-panel" [formGroup]="filterForm">
    <div class="filter-grid">
      <div>
        <label>Category</label>
        <select formControlName="category">
          <option value="">All</option>
          <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
        </select>
      </div>

      <div>
        <label>Diet Type</label>
        <select formControlName="dietType">
          <option value="">All</option>
          <option *ngFor="let d of dietTypes" [value]="d">{{ d }}</option>
        </select>
      </div>

      <div>
        <label>Meal Time</label>
        <select formControlName="mealTime">
          <option value="">All</option>
          <option *ngFor="let m of mealTimes" [value]="m">{{ m }}</option>
        </select>
      </div>

      <div>
        <label>Ingredient Category</label>
        <select formControlName="ingredientCategory">
          <option value="">All</option>
          <option *ngFor="let ic of ingredientCategories" [value]="ic">{{ ic }}</option>
        </select>
      </div>

      <div>
        <label>Season</label>
        <select formControlName="season">
          <option value="">All</option>
          <option *ngFor="let s of seasons" [value]="s">{{ s }}</option>
        </select>
      </div>

      <div>
        <label>Holiday</label>
        <select formControlName="holiday">
          <option value="">All</option>
          <option *ngFor="let h of holidays" [value]="h">{{ h }}</option>
        </select>
      </div>

      <div>
        <label>Occasion</label>
        <select formControlName="occasion">
          <option value="">All</option>
          <option *ngFor="let o of occasions" [value]="o">{{ o }}</option>
        </select>
      </div>

      <div>
        <label>Country</label>
        <select formControlName="country">
          <option value="">All</option>
          <option *ngFor="let c of countries" [value]="c">{{ c }}</option>
        </select>
      </div>

      <div>
        <label>Continent</label>
        <select formControlName="continent">
          <option value="">All</option>
          <option *ngFor="let co of continents" [value]="co">{{ co }}</option>
        </select>
      </div>

      <div>
        <label>Ingredient</label>
        <input type="text" formControlName="ingredient" placeholder="Search..." />
      </div>
    </div>

    <button type="button" (click)="resetFilters()">Reset</button>
  </div>

  <div *ngIf="(filteredRecipes$ | async) as recipes">
    <div *ngIf="recipes.length > 0; else noRecipes">
      <div class="grid">
        <app-recipe-card *ngFor="let recipe of recipes" [recipe]="recipe" (edit)="editRecipe($event)"
          (delete)="deleteRecipe($event)" (toggleFavorite)="toggleFavorite($event)"
          (addToShoppingList)="addToShoppingList($event)">
        </app-recipe-card>
      </div>
    </div>

    <ng-template #noRecipes>
      <p>No recipes available. Create a new recipe!</p>
    </ng-template>
  </div>
</div>
